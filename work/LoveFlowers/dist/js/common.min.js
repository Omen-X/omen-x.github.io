"use strict";var isTouch="ontouchstart"in window||navigator.msMaxTouchPoints>0,imgSrc=[],imgItems=[];imgSrc.forEach(function(e,t){var a=new Image;a.src=e,imgItems.push(a)}),$(function(){function e(){n.hasClass("animate")?($(r).on("click",e),$(n).toggleClass("animate"),$(r).css("display","block"),$(r).stop().animate({opacity:".7"},300)):($(n).toggleClass("animate"),$(r).stop().animate({opacity:"0"},300),$(r).off("click",e),setTimeout(function(){$(r).css("display","none")},300))}function t(){window.pageYOffset>document.documentElement.clientHeight?s.addClass("to-top_visible"):s.removeClass("to-top_visible")}function a(e,t,a){var n=void 0;switch(t){case"40см":n=130*e;break;case"50см":n=160*e;break;case"60см":n=170*e;break;case"90см":n=250*e}return"Крафт"===a&&(n+=150),n}$("#loader").fadeOut(200),setTimeout(function(){$("#loader").remove()},210);var n=$("nav .nav__list"),o=$("nav .nav__mob-button"),r=$("nav .nav__shade");n.addClass("animate"),setTimeout(function(){n.addClass("trs")},0),$(o).on("click",e);var c=$(".nav__link"),i=$(".nav__item");$(".sect");c.on("click",function(t){t.preventDefault();var a=$(this).attr("href");"#contacts"!==a?(window.matchMedia("(max-width: 767px)").matches&&(i.removeClass("active"),$(t.target).parent().addClass("active"),e()),$("html, body").stop().animate({scrollTop:$(a).offset().top},600)):(window.matchMedia("(max-width: 767px)").matches&&(i.removeClass("active"),$(t.target).parent().addClass("active"),e()),$("html, body").stop().animate({scrollTop:$(".order__frame").offset().top-25},600,function(){x("show")}))}),$("#order-slider").ionRangeSlider({min:25,max:101,from:25,step:2});var s=$(".to-top");s.on("click",function(){$("html, body").animate({scrollTop:0},550)}),window.addEventListener("scroll",function(e){t()}),t();var l=$(".form-callback"),d=$(".contacts__callback > button"),m=$(".callback__thank");d.on("click",function(){l.fadeIn(200)}),l.submit(function(e){e.preventDefault(),$.ajax({url:"mail-callback.php",type:"POST",data:$(this).serialize()}).done(function(){l.fadeOut(200),m.fadeIn(200),setTimeout(function(){m.fadeOut(200)},1500),$(".form").trigger("reset")}).fail(function(){$(".form").trigger("reset"),alert("Ошибка отправки формы")})});var u=$(".order-calculate"),f=$(".form-order"),g=$(".order__thank"),p=$(".order__get-form");p.on("click",function(){f.fadeIn(200),$('input[name="count"]',f).val($("#order-slider").val()),$('input[name="size"]',f).val($('input[name="size"]:checked',u).val()),$('input[name="color"]',f).val($('input[name="color"]:checked',u).val()),$('input[name="box"]',f).val($('input[name="box"]:checked',u).val()),$('input[name="price"]',f).val($(".order__cost-val").text())}),f.on("submit",function(e){e.preventDefault(),f.fadeOut(200),g.fadeIn(200)}),f.submit(function(e){e.preventDefault(),$.ajax({url:"mail-order.php",type:"POST",data:$(this).serialize()}).done(function(){f.fadeOut(200),g.fadeIn(200),setTimeout(function(){g.fadeOut(200)},1500),$(".form").trigger("reset")}).fail(function(){$(".form").trigger("reset"),alert("Ошибка отправки формы")})});var v=$(".form-ask"),_=$(".ask__thank"),k=$(".ask__get-form");k.on("click",function(){v.fadeIn(200)}),v.submit(function(e){e.preventDefault(),$.ajax({url:"mail-ask.php",type:"POST",data:$(this).serialize()}).done(function(){v.fadeOut(200),_.fadeIn(200),setTimeout(function(){_.fadeOut(200)},1500),$(".form").trigger("reset")}).fail(function(){$(".form").trigger("reset"),alert("Ошибка отправки формы")})}),$(document.body).on("click",function(e){$(e.target).closest(".form").length||$(e.target).hasClass("show-form")||$(".form, .form-thank").fadeOut(200)});var h=$(".order__cost-val"),b=$(".form-order__summ span"),w=$(".order__img-curr");$(".order__size-items label").on("click",function(e){$(".order__size-items .order__size").removeClass("active"),$(e.target).closest(".order__size").addClass("active")}),$(".order__color-items label").on("click",function(e){$(".order__color-items .order__color").removeClass("active"),$(e.target).closest(".order__color").addClass("active")}),$(".order__box-items label").on("click",function(e){$(".order__box-items .order__box").removeClass("active"),$(e.target).closest(".order__box").addClass("active")}),u.on("change",function(){var e=$("#order-slider").val(),t=$('input[name="size"]:checked',u).val(),n=$('input[name="color"]:checked',u).val(),o=$('input[name="box"]:checked',u).val();if(h.text(a(e,t,o)),b.text(a(e,t,o)),e<51)switch(n){case"Красный":w.css("backgroundImage",'url("../img/content/25-red.png")');break;case"Желтый":w.css("backgroundImage",'url("../img/content/25-yellow.png")');break;case"Белый":w.css("backgroundImage",'url("../img/content/25-white.png")');break;case"Розовый":w.css("backgroundImage",'url("../img/content/25-pink.png")')}if(e>=51&&e<101)switch(n){case"Красный":w.css("backgroundImage",'url("../img/content/51-red.png")');break;case"Желтый":w.css("backgroundImage",'url("../img/content/51-yellow.png")');break;case"Белый":w.css("backgroundImage",'url("../img/content/51-white.png")');break;case"Розовый":w.css("backgroundImage",'url("../img/content/51-pink.png")')}if(101==e)switch(n){case"Красный":w.css("backgroundImage",'url("../img/content/101-red.png")');break;case"Желтый":w.css("backgroundImage",'url("../img/content/101-yellow.png")');break;case"Белый":w.css("backgroundImage",'url("../img/content/101-white.png")');break;case"Розовый":w.css("backgroundImage",'url("../img/content/101-pink.png")')}}),u.trigger("change");var C=($(".gallery"),$(".gallery__content-wrap")),y=$(".gallery__close"),I=$(".gallery__open-btn"),x=function(e){"hide"==e?(C.fadeOut(200),$(document.documentElement).removeClass("modal-open")):"show"==e&&(C.fadeIn(250),$(document.documentElement).addClass("modal-open"))};I.on("click",function(){x("show")}),C.on("click",function(e){$(e.target)[0]==C[0]&&x("hide")}),y.on("click",function(e){x("hide"),$("html, body").stop().animate({scrollTop:$(".order__frame").offset().top-25},300)}),$(window).on("resize",function(){$(window).width()>=768&&($(n).addClass("animate"),$(r).css("display",""))}).resize()}),isTouch?$(document.body).addClass("touch"):$(document.body).addClass("no-touch"),$(document.body).removeClass("no-js"),$("img, a").on("dragstart",function(e){e.preventDefault()});