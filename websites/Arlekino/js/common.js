"use strict";var mobileNav=function(){var e=document.querySelector(".m-nav");document.querySelector(".m-nav__trigger").addEventListener("click",function(){e.classList.contains("active")?document.documentElement.classList.remove("modal-open"):document.documentElement.classList.add("modal-open"),e.classList.toggle("active")})},validateInput=function(e){var t=e.value,n={isValid:!0,error:"",meta:{}};if(e.required)switch(e.type){case"text":default:""===t&&(n.isValid=!1,n.error="Обязательное поле")}if(n.isValid)switch(e.name){case"login":RegExp(/^[A-Za-zА-Яа-я0-9_]*$/).test(t)||(n.isValid=!1,n.error="Недопустимые символы. Введите буквы, цифры или “_”"),"existing_user"===t&&(n.isValid=!1,n.error="Этот логин уже занят. Попробуйте",n.meta.availableLogins=["Denisov_alex","alexey_denisov"]);break;case"password":t.length<6&&(n.isValid=!1,n.error="Введите не менее 6 символов.");break;case"password-confirm":t!==e.closest(".form").querySelector("input[name=password]").value&&(n.isValid=!1,n.error="Введенные пароли не совпадают");break;case"email":RegExp(/\S+@\S+\.\S+/).test(t)||(n.isValid=!1,n.error="Некорректный e-mail")}var r,i=e.closest(".form__field"),o=i.querySelector(".form__field-error"),c=n.isValid,a=n.meta,l=n.error;return c?(i.classList.remove("invalid"),i.classList.add("valid"),o.innerHTML=""):(o.innerHTML=l,a.availableLogins&&(r=a.availableLogins.map(function(e){return"<span data-suggested-login=".concat(e,' class="form__suggested-login">').concat(e,"</span>")}),o.innerHTML="".concat(o.innerHTML,' <span class="c-purple">').concat(r.join(", "),"</span>")),i.classList.remove("valid"),i.classList.add("invalid")),n.isValid},customFormLogic=function(){document.querySelectorAll(".form__toggle-hidden").forEach(function(t){t.addEventListener("click",function(){t.classList.toggle("active");var e=t.parentElement.parentElement.querySelector(".form__input");t.classList.contains("active")?e.setAttribute("type","text"):e.setAttribute("type","password")})}),document.querySelectorAll(".form__copy").forEach(function(n){n.addEventListener("click",function(){var e=n.parentElement.parentElement.querySelector(".form__input"),t=e.type;"password"===t&&(e.type="text"),e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),"password"===t&&(e.type="password"),e.blur()})}),document.querySelectorAll(".form__field-error").forEach(function(r){r.addEventListener("click",function(e){var t,n;e.target.classList.contains("form__suggested-login")&&(t=e.target.dataset.suggestedLogin,(n=r.closest(".form__field").querySelector(".form__input")).value=t,validateInput(n))})})},mSelect=function(){document.querySelectorAll(".m-select").forEach(function(n){n.addEventListener("click",function(e){e.stopPropagation()});var e=n.querySelector(".m-select__list");new SimpleBar(e,{autoHide:!1}),n.querySelector(".m-select__trigger").addEventListener("click",function(){n.classList.toggle("active")});var t=n.querySelector(".m-select__input"),r=n.querySelector(".m-select__value"),i=n.querySelector(".m-select__search-input");e.addEventListener("click",function(e){e.target.classList.contains("m-select__list-item")&&(t.value=e.target.innerHTML,r.innerHTML=e.target.innerHTML,n.classList.remove("active"),i.value="",n.querySelectorAll(".m-select__list-item").forEach(function(e){return e.classList.remove("hidden")}))}),i.addEventListener("keyup",function(){var t=i.value.toLowerCase();n.querySelectorAll(".m-select__list-item").forEach(function(e){e.innerHTML.toLowerCase().startsWith(t)?e.classList.remove("hidden"):e.classList.add("hidden")})})})},formFieldsValidation=function(){document.querySelectorAll(".form__input").forEach(function(e){var t=e.closest(".form__field"),n=t.querySelector(".form__field-error");e.addEventListener("blur",function(){return validateInput(e)}),e.addEventListener("keydown",function(){t.classList.remove("invalid"),n.innerHTML=""})})},formsHandler=function(){document.querySelectorAll(".form").forEach(function(t){t.addEventListener("submit",function(e){e.preventDefault(),Array.from(t.querySelectorAll(".form__input")).map(function(e){return validateInput(e)}).some(function(e){return!e})?console.log("invalid form"):console.log("valid form")})})},dynamicStyles=function(){var e,t,n,r,i,o,c=document.querySelector(".welcome-section");c&&(e=c.querySelector(".welcome__form").clientHeight+80+70,t=.385*window.innerWidth,n=.239*window.innerWidth,r=c.clientHeight-t+2,i=e-n,o=Math.max(r,i,0),c.style.backgroundPosition="center ".concat(o,"px"))};function documentReady(){document.body.addEventListener("click",function(){document.querySelectorAll(".m-select").forEach(function(e){return e.classList.remove("active")}),document.querySelectorAll(".m-select__search-input").forEach(function(e){e.value=""}),document.querySelectorAll(".m-select__list-item").forEach(function(e){return e.classList.remove("hidden")})}),window.addEventListener("resize",function(){dynamicStyles()}),mobileNav(),customFormLogic(),formFieldsValidation(),formsHandler(),mSelect(),dynamicStyles()}!function e(){"complete"!==document.readyState?setTimeout(e,10):documentReady()}();