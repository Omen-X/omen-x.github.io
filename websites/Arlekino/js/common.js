"use strict";var mobileNav=function(){var e=document.querySelector(".m-nav");document.querySelector(".m-nav__trigger").addEventListener("click",function(){e.classList.contains("active")?document.documentElement.classList.remove("modal-open"):document.documentElement.classList.add("modal-open"),e.classList.toggle("active")})},customFormLogic=function(){document.querySelectorAll(".form__toggle-hidden").forEach(function(t){t.addEventListener("click",function(){t.classList.toggle("active");var e=t.parentElement.parentElement.querySelector(".form__input");t.classList.contains("active")?e.setAttribute("type","text"):e.setAttribute("type","password")})}),document.querySelectorAll(".form__copy").forEach(function(r){r.addEventListener("click",function(){var e=r.parentElement.parentElement.querySelector(".form__input"),t=e.type;"password"===t&&(e.type="text"),e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),"password"===t&&(e.type="password"),e.blur()})})},mSelect=function(){document.querySelectorAll(".m-select").forEach(function(r){r.addEventListener("click",function(e){e.stopPropagation()});var e=r.querySelector(".m-select__list");new SimpleBar(e,{autoHide:!1}),r.querySelector(".m-select__trigger").addEventListener("click",function(){r.classList.toggle("active")});var t=r.querySelector(".m-select__input"),n=r.querySelector(".m-select__value"),i=r.querySelector(".m-select__search-input");e.addEventListener("click",function(e){e.target.classList.contains("m-select__list-item")&&(t.value=e.target.innerHTML,n.innerHTML=e.target.innerHTML,r.classList.remove("active"),i.value="",r.querySelectorAll(".m-select__list-item").forEach(function(e){return e.classList.remove("hidden")}))}),i.addEventListener("keyup",function(){var t=i.value.toLowerCase();r.querySelectorAll(".m-select__list-item").forEach(function(e){e.innerHTML.toLowerCase().startsWith(t)?e.classList.remove("hidden"):e.classList.add("hidden")})})})},validateInput=function(e){var t=e.value,r={isValid:!0,error:"",meta:{}};if(e.required)switch(e.type){case"text":default:""===t&&(r.isValid=!1,r.error="Обязательное поле")}if(r.isValid)switch(e.name){case"login":RegExp(/^[A-Za-zА-Яа-я0-9_]*$/).test(t)||(r.isValid=!1,r.error="Недопустимые символы. Введите буквы, цифры или “_”"),"existing_user"===t&&(r.isValid=!1,r.error="Этот логин уже занят. Попробуйте",r.meta.availableLogins=["Denisov_alex","alexey.denisov"]);break;case"password":t.length<6&&(r.isValid=!1,r.error="Введите не менее 6 символов.");break;case"password-confirm":t!==e.closest(".form").querySelector("input[name=password]").value&&(r.isValid=!1,r.error="Введенные пароли не совпадают");break;case"email":RegExp(/\S+@\S+\.\S+/).test(t)||(r.isValid=!1,r.error="Некорректный e-mail")}var n=e.closest(".form__field"),i=n.querySelector(".form__field-error"),o=r.isValid,c=r.meta,a=r.error;return o?(n.classList.remove("invalid"),n.classList.add("valid"),i.innerHTML=""):(i.innerHTML=a,c.availableLogins&&(i.innerHTML="".concat(i.innerHTML,' <span class="c-purple">').concat(c.availableLogins.join(", "),"</span>")),n.classList.remove("valid"),n.classList.add("invalid")),r.isValid},formFieldsValidation=function(){document.querySelectorAll(".form__input").forEach(function(e){var t=e.closest(".form__field"),r=t.querySelector(".form__field-error");e.addEventListener("blur",function(){return validateInput(e)}),e.addEventListener("keydown",function(){t.classList.remove("invalid"),r.innerHTML=""})})},formsHandler=function(){document.querySelectorAll(".form").forEach(function(t){t.addEventListener("submit",function(e){e.preventDefault(),Array.from(t.querySelectorAll(".form__input")).map(function(e){return validateInput(e)}).some(function(e){return!e})?console.log("invalid form"):console.log("valid form")})})};function documentReady(){document.body.addEventListener("click",function(){document.querySelectorAll(".m-select").forEach(function(e){return e.classList.remove("active")}),document.querySelectorAll(".m-select__search-input").forEach(function(e){e.value=""}),document.querySelectorAll(".m-select__list-item").forEach(function(e){return e.classList.remove("hidden")})}),mobileNav(),customFormLogic(),formFieldsValidation(),formsHandler(),mSelect()}!function e(){"complete"!==document.readyState?setTimeout(e,10):documentReady()}();