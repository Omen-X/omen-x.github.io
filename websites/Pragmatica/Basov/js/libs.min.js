!function(e,t){"use strict";var i={item:3,autoWidth:!1,slideMove:1,slideMargin:10,addClass:"",mode:"slide",useCSS:!0,cssEasing:"ease",easing:"linear",speed:400,auto:!1,pauseOnHover:!1,loop:!1,slideEndAnimation:!0,pause:2e3,keyPress:!1,controls:!0,prevHtml:"",nextHtml:"",rtl:!1,adaptiveHeight:!1,vertical:!1,verticalHeight:500,vThumbWidth:100,thumbItem:10,pager:!0,gallery:!1,galleryMargin:5,thumbMargin:5,currentPagerPosition:"middle",enableTouch:!0,enableDrag:!0,freeMove:!0,swipeThreshold:40,responsive:[],onBeforeStart:function(e){},onSliderLoad:function(e){},onBeforeSlide:function(e,t){},onAfterSlide:function(e,t){},onBeforeNextSlide:function(e,t){},onBeforePrevSlide:function(e,t){}};e.fn.lightSlider=function(t){if(0===this.length)return this;if(this.length>1)return this.each(function(){e(this).lightSlider(t)}),this;var n={},a=e.extend(!0,{},i,t),o={},s=this;n.$el=this,"fade"===a.mode&&(a.vertical=!1);var l=s.children(),r=e(window).width(),d=null,h=null,c=0,u=0,g=!1,f=0,p="",v=0,m=!0===a.vertical?"height":"width",b=!0===a.vertical?"margin-bottom":"margin-right",x=0,S=0,I=0,w=0,y=null,C="ontouchstart"in document.documentElement,T={};return T.chbreakpoint=function(){if(r=e(window).width(),a.responsive.length){var t;if(!1===a.autoWidth&&(t=a.item),r<a.responsive[0].breakpoint)for(var i=0;i<a.responsive.length;i++)r<a.responsive[i].breakpoint&&(d=a.responsive[i].breakpoint,h=a.responsive[i]);if(void 0!==h&&null!==h)for(var n in h.settings)h.settings.hasOwnProperty(n)&&((void 0===o[n]||null===o[n])&&(o[n]=a[n]),a[n]=h.settings[n]);if(!e.isEmptyObject(o)&&r>a.responsive[0].breakpoint)for(var s in o)o.hasOwnProperty(s)&&(a[s]=o[s]);!1===a.autoWidth&&x>0&&I>0&&t!==a.item&&(v=Math.round(x/((I+a.slideMargin)*a.slideMove)))}},T.calSW=function(){!1===a.autoWidth&&(I=(f-(a.item*a.slideMargin-a.slideMargin))/a.item)},T.calWidth=function(e){var t=!0===e?p.find(".lslide").length:l.length;if(!1===a.autoWidth)u=t*(I+a.slideMargin);else{u=0;for(var i=0;t>i;i++)u+=parseInt(l.eq(i).width())+a.slideMargin}return u},(n={doCss:function(){return!(!a.useCSS||!function(){for(var e=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],t=document.documentElement,i=0;i<e.length;i++)if(e[i]in t.style)return!0}())},keyPress:function(){a.keyPress&&e(document).on("keyup.lightslider",function(t){e(":focus").is("input, textarea")||(t.preventDefault?t.preventDefault():t.returnValue=!1,37===t.keyCode?s.goToPrevSlide():39===t.keyCode&&s.goToNextSlide())})},controls:function(){a.controls&&(s.after('<div class="lSAction"><a class="lSPrev">'+a.prevHtml+'</a><a class="lSNext">'+a.nextHtml+"</a></div>"),a.autoWidth?T.calWidth(!1)<f&&p.find(".lSAction").hide():c<=a.item&&p.find(".lSAction").hide(),p.find(".lSAction a").on("click",function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,"lSPrev"===e(this).attr("class")?s.goToPrevSlide():s.goToNextSlide(),!1}))},initialStyle:function(){var e=this;"fade"===a.mode&&(a.autoWidth=!1,a.slideEndAnimation=!1),a.auto&&(a.slideEndAnimation=!1),a.autoWidth&&(a.slideMove=1,a.item=1),a.loop&&(a.slideMove=1,a.freeMove=!1),a.onBeforeStart.call(this,s),T.chbreakpoint(),s.addClass("lightSlider").wrap('<div class="lSSlideOuter '+a.addClass+'"><div class="lSSlideWrapper"></div></div>'),p=s.parent(".lSSlideWrapper"),!0===a.rtl&&p.parent().addClass("lSrtl"),a.vertical?(p.parent().addClass("vertical"),f=a.verticalHeight,p.css("height",f+"px")):f=s.outerWidth(),l.addClass("lslide"),!0===a.loop&&"slide"===a.mode&&(T.calSW(),T.clone=function(){if(T.calWidth(!0)>f){for(var t=0,i=0,n=0;n<l.length&&(t+=parseInt(s.find(".lslide").eq(n).width())+a.slideMargin,i++,!(t>=f+a.slideMargin));n++);var o=!0===a.autoWidth?i:a.item;if(o<s.find(".clone.left").length)for(var r=0;r<s.find(".clone.left").length-o;r++)l.eq(r).remove();if(o<s.find(".clone.right").length)for(var d=l.length-1;d>l.length-1-s.find(".clone.right").length;d--)v--,l.eq(d).remove();for(var h=s.find(".clone.right").length;o>h;h++)s.find(".lslide").eq(h).clone().removeClass("lslide").addClass("clone right").appendTo(s),v++;for(var c=s.find(".lslide").length-s.find(".clone.left").length;c>s.find(".lslide").length-o;c--)s.find(".lslide").eq(c-1).clone().removeClass("lslide").addClass("clone left").prependTo(s);l=s.children()}else l.hasClass("clone")&&(s.find(".clone").remove(),e.move(s,0))},T.clone()),T.sSW=function(){c=l.length,!0===a.rtl&&!1===a.vertical&&(b="margin-left"),!1===a.autoWidth&&l.css(m,I+"px"),l.css(b,a.slideMargin+"px"),u=T.calWidth(!1),s.css(m,u+"px"),!0===a.loop&&"slide"===a.mode&&!1===g&&(v=s.find(".clone.left").length)},T.calL=function(){l=s.children(),c=l.length},this.doCss()&&p.addClass("usingCss"),T.calL(),"slide"===a.mode?(T.calSW(),T.sSW(),!0===a.loop&&(x=e.slideValue(),this.move(s,x)),!1===a.vertical&&this.setHeight(s,!1)):(this.setHeight(s,!0),s.addClass("lSFade"),this.doCss()||(l.fadeOut(0),l.eq(v).fadeIn(0))),!0===a.loop&&"slide"===a.mode?l.eq(v).addClass("active"):l.first().addClass("active")},pager:function(){var e=this;if(T.createPager=function(){w=(f-(a.thumbItem*a.thumbMargin-a.thumbMargin))/a.thumbItem;var t=p.find(".lslide"),i=p.find(".lslide").length,n=0,o="",l=0;for(n=0;i>n;n++){"slide"===a.mode&&(a.autoWidth?l+=(parseInt(t.eq(n).width())+a.slideMargin)*a.slideMove:l=n*(I+a.slideMargin)*a.slideMove);var r=t.eq(n*a.slideMove).attr("data-thumb");if(o+=!0===a.gallery?'<li style="width:100%;'+m+":"+w+"px;"+b+":"+a.thumbMargin+'px"><a href="#"><img src="'+r+'" /></a></li>':'<li><a href="#">'+(n+1)+"</a></li>","slide"===a.mode&&l>=u-f-a.slideMargin){n+=1;var d=2;a.autoWidth&&(o+='<li><a href="#">'+(n+1)+"</a></li>",d=1),d>n?(o=null,p.parent().addClass("noPager")):p.parent().removeClass("noPager");break}}var h=p.parent();h.find(".lSPager").html(o),!0===a.gallery&&(!0===a.vertical&&h.find(".lSPager").css("width",a.vThumbWidth+"px"),S=n*(a.thumbMargin+w)+.5,h.find(".lSPager").css({property:S+"px","transition-duration":a.speed+"ms"}),!0===a.vertical&&p.parent().css("padding-right",a.vThumbWidth+a.galleryMargin+"px"),h.find(".lSPager").css(m,S+"px"));var c=h.find(".lSPager").find("li");c.first().addClass("active"),c.on("click",function(){return!0===a.loop&&"slide"===a.mode?v+=c.index(this)-h.find(".lSPager").find("li.active").index():v=c.index(this),s.mode(!1),!0===a.gallery&&e.slideThumb(),!1})},a.pager){var t="lSpg";a.gallery&&(t="lSGallery"),p.after('<ul class="lSPager '+t+'"></ul>');var i=a.vertical?"margin-left":"margin-top";p.parent().find(".lSPager").css(i,a.galleryMargin+"px"),T.createPager()}setTimeout(function(){T.init()},0)},setHeight:function(e,t){var i=null,n=this;i=a.loop?e.children(".lslide ").first():e.children().first();var o=function(){var n=i.outerHeight(),a=0,o=n;t&&(n=0,a=100*o/f),e.css({height:n+"px","padding-bottom":a+"%"})};o(),i.find("img").length?i.find("img")[0].complete?(o(),y||n.auto()):i.find("img").on("load",function(){setTimeout(function(){o(),y||n.auto()},100)}):y||n.auto()},active:function(e,t){this.doCss()&&"fade"===a.mode&&p.addClass("on");var i=0;if(v*a.slideMove<c){e.removeClass("active"),this.doCss()||"fade"!==a.mode||!1!==t||e.fadeOut(a.speed),i=!0===t?v:v*a.slideMove;var n,o;!0===t&&(n=e.length,o=n-1,i+1>=n&&(i=o)),!0===a.loop&&"slide"===a.mode&&(i=!0===t?v-s.find(".clone.left").length:v*a.slideMove,!0===t&&(n=e.length,o=n-1,i+1===n?i=o:i+1>n&&(i=0))),this.doCss()||"fade"!==a.mode||!1!==t||e.eq(i).fadeIn(a.speed),e.eq(i).addClass("active")}else e.removeClass("active"),e.eq(e.length-1).addClass("active"),this.doCss()||"fade"!==a.mode||!1!==t||(e.fadeOut(a.speed),e.eq(i).fadeIn(a.speed))},move:function(e,t){!0===a.rtl&&(t=-t),this.doCss()?e.css(!0===a.vertical?{transform:"translate3d(0px, "+-t+"px, 0px)","-webkit-transform":"translate3d(0px, "+-t+"px, 0px)"}:{transform:"translate3d("+-t+"px, 0px, 0px)","-webkit-transform":"translate3d("+-t+"px, 0px, 0px)"}):!0===a.vertical?e.css("position","relative").animate({top:-t+"px"},a.speed,a.easing):e.css("position","relative").animate({left:-t+"px"},a.speed,a.easing);var i=p.parent().find(".lSPager").find("li");this.active(i,!0)},fade:function(){this.active(l,!1);var e=p.parent().find(".lSPager").find("li");this.active(e,!0)},slide:function(){var e=this;T.calSlide=function(){u>f&&(x=e.slideValue(),e.active(l,!1),x>u-f-a.slideMargin?x=u-f-a.slideMargin:0>x&&(x=0),e.move(s,x),!0===a.loop&&"slide"===a.mode&&(v>=c-s.find(".clone.left").length/a.slideMove&&e.resetSlide(s.find(".clone.left").length),0===v&&e.resetSlide(p.find(".lslide").length)))},T.calSlide()},resetSlide:function(e){var t=this;p.find(".lSAction a").addClass("disabled"),setTimeout(function(){v=e,p.css("transition-duration","0ms"),x=t.slideValue(),t.active(l,!1),n.move(s,x),setTimeout(function(){p.css("transition-duration",a.speed+"ms"),p.find(".lSAction a").removeClass("disabled")},50)},a.speed+100)},slideValue:function(){var e=0;if(!1===a.autoWidth)e=v*(I+a.slideMargin)*a.slideMove;else{e=0;for(var t=0;v>t;t++)e+=parseInt(l.eq(t).width())+a.slideMargin}return e},slideThumb:function(){var e;switch(a.currentPagerPosition){case"left":e=0;break;case"middle":e=f/2-w/2;break;case"right":e=f-w}var t=v-s.find(".clone.left").length,i=p.parent().find(".lSPager");"slide"===a.mode&&!0===a.loop&&(t>=i.children().length?t=0:0>t&&(t=i.children().length));var n=t*(w+a.thumbMargin)-e;n+f>S&&(n=S-f-a.thumbMargin),0>n&&(n=0),this.move(i,n)},auto:function(){a.auto&&(clearInterval(y),y=setInterval(function(){s.goToNextSlide()},a.pause))},pauseOnHover:function(){var t=this;a.auto&&a.pauseOnHover&&(p.on("mouseenter",function(){e(this).addClass("ls-hover"),s.pause(),a.auto=!0}),p.on("mouseleave",function(){e(this).removeClass("ls-hover"),p.find(".lightSlider").hasClass("lsGrabbing")||t.auto()}))},touchMove:function(e,t){if(p.css("transition-duration","0ms"),"slide"===a.mode){var i=x-(e-t);if(i>=u-f-a.slideMargin)if(!1===a.freeMove)i=u-f-a.slideMargin;else{var n=u-f-a.slideMargin;i=n+(i-n)/5}else 0>i&&(!1===a.freeMove?i=0:i/=5);this.move(s,i)}},touchEnd:function(e){if(p.css("transition-duration",a.speed+"ms"),"slide"===a.mode){var t=!1,i=!0;(x-=e)>u-f-a.slideMargin?(x=u-f-a.slideMargin,!1===a.autoWidth&&(t=!0)):0>x&&(x=0);var n=function(e){var i=0;if(t||e&&(i=1),a.autoWidth)for(var n=0,o=0;o<l.length&&(n+=parseInt(l.eq(o).width())+a.slideMargin,v=o+i,!(n>=x));o++);else{var s=x/((I+a.slideMargin)*a.slideMove);v=parseInt(s)+i,x>=u-f-a.slideMargin&&s%1!=0&&v++}};e>=a.swipeThreshold?(n(!1),i=!1):e<=-a.swipeThreshold&&(n(!0),i=!1),s.mode(i),this.slideThumb()}else e>=a.swipeThreshold?s.goToPrevSlide():e<=-a.swipeThreshold&&s.goToNextSlide()},enableDrag:function(){var t=this;if(!C){var i=0,n=0,o=!1;p.find(".lightSlider").addClass("lsGrab"),p.on("mousedown",function(t){return!(f>u&&0!==u)&&void("lSPrev"!==e(t.target).attr("class")&&"lSNext"!==e(t.target).attr("class")&&(i=!0===a.vertical?t.pageY:t.pageX,o=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,p.scrollLeft+=1,p.scrollLeft-=1,p.find(".lightSlider").removeClass("lsGrab").addClass("lsGrabbing"),clearInterval(y)))}),e(window).on("mousemove",function(e){o&&(n=!0===a.vertical?e.pageY:e.pageX,t.touchMove(n,i))}),e(window).on("mouseup",function(s){if(o){p.find(".lightSlider").removeClass("lsGrabbing").addClass("lsGrab"),o=!1;var l=(n=!0===a.vertical?s.pageY:s.pageX)-i;Math.abs(l)>=a.swipeThreshold&&e(window).on("click.ls",function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopImmediatePropagation(),t.stopPropagation(),e(window).off("click.ls")}),t.touchEnd(l)}})}},enableTouch:function(){var e=this;if(C){var t={},i={};p.on("touchstart",function(e){i=e.originalEvent.targetTouches[0],t.pageX=e.originalEvent.targetTouches[0].pageX,t.pageY=e.originalEvent.targetTouches[0].pageY,clearInterval(y)}),p.on("touchmove",function(n){if(f>u&&0!==u)return!1;var o=n.originalEvent;i=o.targetTouches[0];var s=Math.abs(i.pageX-t.pageX),l=Math.abs(i.pageY-t.pageY);!0===a.vertical?(3*l>s&&n.preventDefault(),e.touchMove(i.pageY,t.pageY)):(3*s>l&&n.preventDefault(),e.touchMove(i.pageX,t.pageX))}),p.on("touchend",function(){if(f>u&&0!==u)return!1;var n;n=!0===a.vertical?i.pageY-t.pageY:i.pageX-t.pageX,e.touchEnd(n)})}},build:function(){var t=this;t.initialStyle(),this.doCss()&&(!0===a.enableTouch&&t.enableTouch(),!0===a.enableDrag&&t.enableDrag()),e(window).on("focus",function(){t.auto()}),e(window).on("blur",function(){clearInterval(y)}),t.pager(),t.pauseOnHover(),t.controls(),t.keyPress()}}).build(),T.init=function(){T.chbreakpoint(),!0===a.vertical?(f=a.item>1?a.verticalHeight:l.outerHeight(),p.css("height",f+"px")):f=p.outerWidth(),!0===a.loop&&"slide"===a.mode&&T.clone(),T.calL(),"slide"===a.mode&&s.removeClass("lSSlide"),"slide"===a.mode&&(T.calSW(),T.sSW()),setTimeout(function(){"slide"===a.mode&&s.addClass("lSSlide")},1e3),a.pager&&T.createPager(),!0===a.adaptiveHeight&&!1===a.vertical&&s.css("height",l.eq(v).outerHeight(!0)),!1===a.adaptiveHeight&&("slide"===a.mode?!1===a.vertical?n.setHeight(s,!1):n.auto():n.setHeight(s,!0)),!0===a.gallery&&n.slideThumb(),"slide"===a.mode&&n.slide(),!1===a.autoWidth?l.length<=a.item?p.find(".lSAction").hide():p.find(".lSAction").show():T.calWidth(!1)<f&&0!==u?p.find(".lSAction").hide():p.find(".lSAction").show()},s.goToPrevSlide=function(){if(v>0)a.onBeforePrevSlide.call(this,s,v),v--,s.mode(!1),!0===a.gallery&&n.slideThumb();else if(!0===a.loop){if(a.onBeforePrevSlide.call(this,s,v),"fade"===a.mode){var e=c-1;v=parseInt(e/a.slideMove)}s.mode(!1),!0===a.gallery&&n.slideThumb()}else!0===a.slideEndAnimation&&(s.addClass("leftEnd"),setTimeout(function(){s.removeClass("leftEnd")},400))},s.goToNextSlide=function(){var e=!0;"slide"===a.mode&&(e=n.slideValue()<u-f-a.slideMargin),v*a.slideMove<c-a.slideMove&&e?(a.onBeforeNextSlide.call(this,s,v),v++,s.mode(!1),!0===a.gallery&&n.slideThumb()):!0===a.loop?(a.onBeforeNextSlide.call(this,s,v),v=0,s.mode(!1),!0===a.gallery&&n.slideThumb()):!0===a.slideEndAnimation&&(s.addClass("rightEnd"),setTimeout(function(){s.removeClass("rightEnd")},400))},s.mode=function(e){!0===a.adaptiveHeight&&!1===a.vertical&&s.css("height",l.eq(v).outerHeight(!0)),!1===g&&("slide"===a.mode?n.doCss()&&(s.addClass("lSSlide"),""!==a.speed&&p.css("transition-duration",a.speed+"ms"),""!==a.cssEasing&&p.css("transition-timing-function",a.cssEasing)):n.doCss()&&(""!==a.speed&&s.css("transition-duration",a.speed+"ms"),""!==a.cssEasing&&s.css("transition-timing-function",a.cssEasing))),e||a.onBeforeSlide.call(this,s,v),"slide"===a.mode?n.slide():n.fade(),p.hasClass("ls-hover")||n.auto(),setTimeout(function(){e||a.onAfterSlide.call(this,s,v)},a.speed),g=!0},s.play=function(){s.goToNextSlide(),a.auto=!0,n.auto()},s.pause=function(){a.auto=!1,clearInterval(y)},s.refresh=function(){T.init()},s.getCurrentSlideCount=function(){var e=v;if(a.loop){var t=p.find(".lslide").length,i=s.find(".clone.left").length;e=i-1>=v?t+(v-i):v>=t+i?v-t-i:v-i}return e+1},s.getTotalSlideCount=function(){return p.find(".lslide").length},s.goToSlide=function(e){v=a.loop?e+s.find(".clone.left").length-1:e,s.mode(!1),!0===a.gallery&&n.slideThumb()},s.destroy=function(){s.lightSlider&&(s.goToPrevSlide=function(){},s.goToNextSlide=function(){},s.mode=function(){},s.play=function(){},s.pause=function(){},s.refresh=function(){},s.getCurrentSlideCount=function(){},s.getTotalSlideCount=function(){},s.goToSlide=function(){},s.lightSlider=null,T={init:function(){}},s.parent().parent().find(".lSAction, .lSPager").remove(),s.removeClass("lightSlider lSFade lSSlide lsGrab lsGrabbing leftEnd right").removeAttr("style").unwrap().unwrap(),s.children().removeAttr("style"),l.removeClass("lslide active"),s.find(".clone").remove(),l=null,y=null,g=!1,v=0)},setTimeout(function(){a.onSliderLoad.call(this,s)},10),e(window).on("resize orientationchange",function(e){setTimeout(function(){e.preventDefault?e.preventDefault():e.returnValue=!1,T.init()},200)}),this}}(jQuery),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.lightbox=t(e.jQuery)}(this,function(e){function t(t){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=e.extend({},this.constructor.defaults),this.option(t)}return t.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:600,fitImagesInViewport:!0,imageFadeDuration:600,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1,sanitizeTitle:!1},t.prototype.option=function(t){e.extend(this.options,t)},t.prototype.imageCountLabel=function(e,t){return this.options.albumLabel.replace(/%1/g,e).replace(/%2/g,t)},t.prototype.init=function(){var t=this;e(document).ready(function(){t.enable(),t.build()})},t.prototype.enable=function(){var t=this;e("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(i){return t.start(e(i.currentTarget)),!1})},t.prototype.build=function(){var t=this;e('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(e("body")),this.$lightbox=e("#lightbox"),this.$overlay=e("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.$image=this.$lightbox.find(".lb-image"),this.$nav=this.$lightbox.find(".lb-nav"),this.containerPadding={top:parseInt(this.$container.css("padding-top"),10),right:parseInt(this.$container.css("padding-right"),10),bottom:parseInt(this.$container.css("padding-bottom"),10),left:parseInt(this.$container.css("padding-left"),10)},this.imageBorderWidth={top:parseInt(this.$image.css("border-top-width"),10),right:parseInt(this.$image.css("border-right-width"),10),bottom:parseInt(this.$image.css("border-bottom-width"),10),left:parseInt(this.$image.css("border-left-width"),10)},this.$overlay.hide().on("click",function(){return t.end(),!1}),this.$lightbox.hide().on("click",function(i){return"lightbox"===e(i.target).attr("id")&&t.end(),!1}),this.$outerContainer.on("click",function(i){return"lightbox"===e(i.target).attr("id")&&t.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===t.currentImageIndex?t.changeImage(t.album.length-1):t.changeImage(t.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return t.currentImageIndex===t.album.length-1?t.changeImage(0):t.changeImage(t.currentImageIndex+1),!1}),this.$nav.on("mousedown",function(e){3===e.which&&(t.$nav.css("pointer-events","none"),t.$lightbox.one("contextmenu",function(){setTimeout(function(){this.$nav.css("pointer-events","auto")}.bind(t),0)}))}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return t.end(),!1})},t.prototype.start=function(t){function i(e){n.album.push({link:e.attr("href"),title:e.attr("data-title")||e.attr("title")})}var n=this,a=e(window);a.on("resize",e.proxy(this.sizeOverlay,this)),e("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var o,s=0,l=t.attr("data-lightbox");if(l){o=e(t.prop("tagName")+'[data-lightbox="'+l+'"]');for(var r=0;r<o.length;r=++r)i(e(o[r])),o[r]===t[0]&&(s=r)}else if("lightbox"===t.attr("rel"))i(t);else{o=e(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]');for(var d=0;d<o.length;d=++d)i(e(o[d])),o[d]===t[0]&&(s=d)}var h=a.scrollTop()+this.options.positionFromTop,c=a.scrollLeft();this.$lightbox.css({top:h+"px",left:c+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&e("body").addClass("lb-disable-scrolling"),this.changeImage(s)},t.prototype.changeImage=function(t){var i=this;this.disableKeyboardNav();var n=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),e(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var a=new Image;a.onload=function(){var o,s,l,r,d,h;n.attr("src",i.album[t].link),e(a),n.width(a.width),n.height(a.height),i.options.fitImagesInViewport&&(h=e(window).width(),d=e(window).height(),r=h-i.containerPadding.left-i.containerPadding.right-i.imageBorderWidth.left-i.imageBorderWidth.right-20,l=d-i.containerPadding.top-i.containerPadding.bottom-i.imageBorderWidth.top-i.imageBorderWidth.bottom-120,i.options.maxWidth&&i.options.maxWidth<r&&(r=i.options.maxWidth),i.options.maxHeight&&i.options.maxHeight<r&&(l=i.options.maxHeight),(a.width>r||a.height>l)&&(a.width/r>a.height/l?(s=r,o=parseInt(a.height/(a.width/s),10),n.width(s),n.height(o)):(o=l,s=parseInt(a.width/(a.height/o),10),n.width(s),n.height(o)))),i.sizeContainer(n.width(),n.height())},a.src=this.album[t].link,this.currentImageIndex=t},t.prototype.sizeOverlay=function(){this.$overlay.width(e(document).width()).height(e(document).height())},t.prototype.sizeContainer=function(e,t){function i(){n.$lightbox.find(".lb-dataContainer").width(s),n.$lightbox.find(".lb-prevLink").height(l),n.$lightbox.find(".lb-nextLink").height(l),n.showImage()}var n=this,a=this.$outerContainer.outerWidth(),o=this.$outerContainer.outerHeight(),s=e+this.containerPadding.left+this.containerPadding.right+this.imageBorderWidth.left+this.imageBorderWidth.right,l=t+this.containerPadding.top+this.containerPadding.bottom+this.imageBorderWidth.top+this.imageBorderWidth.bottom;a!==s||o!==l?this.$outerContainer.animate({width:s,height:l},this.options.resizeDuration,"swing",function(){i()}):i()},t.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn(this.options.imageFadeDuration),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){var e=!1;try{document.createEvent("TouchEvent"),e=!!this.options.alwaysShowNavOnTouchDevices}catch(e){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(e&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),e&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),e&&this.$lightbox.find(".lb-next").css("opacity","1"))))},t.prototype.updateDetails=function(){var t=this;if(void 0!==this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title){var i=this.$lightbox.find(".lb-caption");this.options.sanitizeTitle?i.text(this.album[this.currentImageIndex].title):i.html(this.album[this.currentImageIndex].title),i.fadeIn("fast").find("a").on("click",function(t){void 0!==e(this).attr("target")?window.open(e(this).attr("href"),e(this).attr("target")):location.href=e(this).attr("href")})}if(this.album.length>1&&this.options.showImageNumberLabel){var n=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(n).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return t.sizeOverlay()})},t.prototype.preloadNeighboringImages=function(){this.album.length>this.currentImageIndex+1&&((new Image).src=this.album[this.currentImageIndex+1].link),this.currentImageIndex>0&&((new Image).src=this.album[this.currentImageIndex-1].link)},t.prototype.enableKeyboardNav=function(){e(document).on("keyup.keyboard",e.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){e(document).off(".keyboard")},t.prototype.keyboardAction=function(e){var t=e.keyCode,i=String.fromCharCode(t).toLowerCase();27===t||i.match(/x|o|c/)?this.end():"p"===i||37===t?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):("n"===i||39===t)&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},t.prototype.end=function(){this.disableKeyboardNav(),e(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),e("select, object, embed").css({visibility:"visible"}),this.options.disableScrolling&&e("body").removeClass("lb-disable-scrolling")},new t});