"use strict";function mainGallery(){$(".gallery").length&&$(".gallery").lightGallery({loop:!1,getCaptionFromTitleOrAlt:!1})}function productsGallery(){$(".products__items").length&&$(".products__items").lightGallery({loop:!0})}function documentReady(){function t(){n.each(function(t,e){e.setAttribute("disabled",""),e.classList.add("hidden")})}var e=$(".form"),a=$(".form-main"),i=$(".form-wrap"),n=$(".form-main__fields > *",a),r=$(".form-trigger"),l=$(".form-main__title"),o=$(".btn-main",a),d="";t(),i.on("click",function(t){($(t.target).hasClass("form-wrap")||$(t.target).hasClass("form-main__close"))&&($(this).fadeOut(200),$(document.documentElement).removeClass("modal-open"))}),r.on("click",function(e){t(),d="",a.trigger("reset");var r=e.target,m=r.getAttribute("data-fields").split(","),s=r.getAttribute("data-title"),c=r.getAttribute("data-btn-text"),u=r.getAttribute("data-email-title");s&&l.html(s),c&&o.text(c),u&&(d=u),n.each(function(t,e){-1!==m.indexOf(e.getAttribute("name"))&&(e.removeAttribute("disabled"),e.classList.remove("hidden"))}),i.fadeIn(200),$(document.documentElement).addClass("modal-open")}),e.submit(function(t){var i=$(t.target);t.preventDefault(),i.hasClass("feedback-form")&&(d="Вопрос"),$.ajax({url:"./mail.php",type:"POST",data:i.serialize()+"&title="+encodeURIComponent(d)}).done(function(){e.trigger("reset")}).fail(function(){a.trigger("reset"),alert("Ошибка отправки формы")})}),mainGallery(),productsGallery()}!function t(){"complete"!==document.readyState?setTimeout(t,10):documentReady()}();