"use strict";function mainGallery(){$(".gallery").length&&$(".gallery").lightGallery({loop:!1,getCaptionFromTitleOrAlt:!1})}function documentReady(){function t(){n.each(function(t,e){e.setAttribute("disabled",""),e.classList.add("hidden")})}var e=$(".form"),a=$(".form-main"),i=$(".form-wrap"),n=$(".form-main__fields > *",a),r=$(".form-trigger"),o=$(".form-main__title"),l=$(".btn-main",a),m="";t(),i.on("click",function(t){($(t.target).hasClass("form-wrap")||$(t.target).hasClass("form-main__close"))&&($(this).fadeOut(200),$(document.documentElement).removeClass("modal-open"))}),r.on("click",function(e){t(),m="",a.trigger("reset");var r=e.target,d=r.getAttribute("data-fields").split(","),s=r.getAttribute("data-title"),c=r.getAttribute("data-btn-text"),u=r.getAttribute("data-email-title");s&&o.html(s),c&&l.text(c),u&&(m=u),n.each(function(t,e){-1!==d.indexOf(e.getAttribute("name"))&&(e.removeAttribute("disabled"),e.classList.remove("hidden"))}),i.fadeIn(200),$(document.documentElement).addClass("modal-open")}),e.submit(function(t){var i=$(t.target);t.preventDefault(),i.hasClass("feedback-form")&&(m="Вопрос"),$.ajax({url:"./mail.php",type:"POST",data:i.serialize()+"&title="+encodeURIComponent(m)}).done(function(){e.trigger("reset");window.location}).fail(function(){a.trigger("reset"),alert("Ошибка отправки формы")})}),mainGallery()}!function t(){"complete"!==document.readyState?setTimeout(t,10):documentReady()}();